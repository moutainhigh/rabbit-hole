name: test

on: [push]
jobs:
  qywx:
    runs-on: ubuntu-latest
    steps:
      # ä¼ä¸šå¾®ä¿¡é€šçŸ¥
      - id: wx_prep
        run: |
          echo ::set-output name=wx_created::$(date -u +'%Y-%m-%d %H:%M:%SZ')
          GITHUB_REF=${{github.base_ref}}
          echo ::set-output name=wx_base_ref::$(echo ${GITHUB_REF#refs/heads/})
          GITHUB_REF=${{github.event.ref}}
          echo ::set-output name=wx_target_ref::$(echo ${GITHUB_REF#refs/heads/})
      - name: WeChat Work Notification
        uses: chf007/action-wechat-work@master
        env:
          WECHAT_WORK_BOT_WEBHOOK: ${{secrets.WECHAT_WORK_BOT_WEBHOOK}}
        with:
          msgtype: markdown
          content: "ğŸ‰**ã€[${{ github.repository }}](https://github.com/${{ github.repository }})ã€‘** \n
          \n
          ğŸƒ <font color=\"info\">${{ github.actor }}</font>\n
          ğŸ• <font color=\"comment\">${{ steps.wx_prep.outputs.wx_created }}</font> \n
          ğŸ”§ <font color=\"warning\">${{ steps.wx_prep.outputs.wx_base_ref || 'âˆ…' }} -> ${{ steps.wx_prep.outputs.wx_target_ref }}</font> \n
          ğŸ“ <font color=\"comment\"> ${{ github.event.head_commit.message }}</font> \n
          \n
          - [æŸ¥çœ‹è¯¦æƒ…](https://www.hocgin.top)
          "
