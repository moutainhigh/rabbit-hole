<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.github.lotus.ums.biz.mapper.AuthorityMapper">
  <select id="pagingUserByAuthorityId" resultType="com.github.lotus.ums.biz.entity.User">
    SELECT distinct ua.*
    FROM ams_role_user_ref aur
           LEFT JOIN ams_role_authority_ref ara on aur.role_id = ara.role_id
           LEFT JOIN ums_user ua on ua.id = ara.role_id
    WHERE ara.authority_id = #{authorityId}
      AND aur.id IS NOT NULL
  </select>
</mapper>
